<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
<title>Kalkulator wyp≈Çaty ‚Äî CarNet</title>

<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">

<style>
:root{
  --accent: #21C0FC;
  --muted: #9aa;
  --glass-border: rgba(255,255,255,0.08);
  --net-factor: 0.82;
  --max-width-app: 1200px;
}

/* base */
*{ box-sizing: border-box; }
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  min-height: 100vh;
  font-family: "Open Sans", Arial, sans-serif;
  color: #fff;
  position: relative;
  overflow-x: hidden;
}

body::before {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: url("https://carnet.pl/app/uploads/2025/05/weekend.png") no-repeat center center fixed;
  background-size: cover;
  filter: blur(6px);
  z-index: -2;
}

body::after {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.55);
  z-index: -1;
}

/* layout */
.main-wrapper {
  width: 100%;
  max-width: var(--max-width-app);
  margin: 40px auto;
  display: flex;
  gap: 30px;
  padding: 0;
  align-items: flex-start;
  justify-content: center;
  box-sizing: border-box;
}

/* card style */
.card {
  background: rgba(28,28,28,0.75);
  border-radius: 14px;
  padding: 28px;
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: none;
  box-shadow: none;
  color: #eaf6ff;
  flex: 1 1 50%;
  position: relative;
}

/* header */
.container img { display:block; width: 200px; margin: 0 auto 18px; }
h2 { color: var(--accent); text-align:center; margin:6px 0 18px; font-size: 26px; font-weight:800; }

/* labels and inputs */
.field-label { display:block; color: var(--accent); font-weight:700; margin:12px 0 6px; font-size:15px; }
input[type="number"], input[type="password"] {
  width:100%;
  padding:12px;
  border-radius:10px;
  border:none;
  background: rgba(255,255,255,0.08);
  color: #fff;
  font-size:15px;
}

/* checkbox */
.checkbox-label { margin:16px 0; }
.checkbox-label label {
  display:flex;
  align-items:center;
  gap:10px;
  cursor:pointer;
  font-weight:700;
  color: var(--accent);
  font-size:15px;
}
.checkbox-label input[type="checkbox"]{ transform:scale(1.2); margin:0; accent-color: var(--accent); }

/* buttons */
.btn-row { display:flex; gap:12px; justify-content:center; margin-top:12px; flex-wrap:wrap; }
button {
  background: var(--accent);
  color: #fff;
  border: none;
  padding: 12px 28px;
  border-radius: 10px; /* To kluczowe zaokrƒÖglenie */
  font-weight: 700;
  font-size: 15px;
  cursor: pointer;
  width: 100%; /* RozciƒÖgnie przycisk w oknie logowania */
  max-width: 220px; 
  transition: all 0.2s ease;
  box-shadow: 0 4px 15px rgba(33, 192, 252, 0.3);
  margin-top: 10px;
}
button:hover {
  background: #1aa8e9;
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(33, 192, 252, 0.4);
}
.logout-link {
  display: inline-block;
  margin-top: 20px;
  color: #777;
  font-size: 11px;
  text-decoration: underline;
  cursor: pointer;
  width: 100%;
  text-align: center;
}

/* results */
.result { margin-top:18px; color: var(--accent); font-weight:800; text-align:center; font-size:17px; }
.details { margin-top:12px; background: rgba(255,255,255,0.05); padding:12px; border-radius:10px; color:#dbeaf7; font-size:14px; line-height:1.45; border:none; }

/* sidebar formatting */
.sidebar strong { color:var(--accent); display:block; margin-bottom:10px; font-size:16px; font-weight:700; }
.sidebar ul { margin-left:18px; padding-left:0; }

/* credits */
.credits { margin-top:14px; text-align:center; color:var(--muted); font-size:12px; }
.credits span{ color:var(--accent); font-weight:700; }

/* login overlay */
#loginOverlay {
  position: fixed;
  top:0; left:0;
  width:100%; height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
  background: rgba(0,0,0,0.8);
  z-index: 999;
}
.login-box {
  background: rgba(28, 28, 28, 0.9);
  padding: 40px;
  border-radius: 16px;
  text-align: center;
  max-width: 340px;
  width: 90%;
  box-shadow: 0 0 20px rgba(0,0,0,0.5);
  /* Dodaj te 3 linie poni≈ºej */
  display: flex;
  flex-direction: column;
  align-items: center;
}
.login-error {
  color: #ff6464;
  margin-top: 10px;
  font-size: 14px;
  display: none;
}

/* responsive */
@media (max-width: 980px) {
  .main-wrapper { flex-direction:column; padding:14px; gap:16px; align-items:center; }
  .card { width: 100%; max-width: 760px; }
  h2{ font-size:24px; }
}
</style>
</head>
<body>

<div id="loginOverlay">
  <div class="login-box">
    <h2>üîí Dostƒôp chroniony</h2>
    <input type="password" id="passwordInput" placeholder="Wpisz has≈Ço..." />
    <button id="loginBtn">Zaloguj</button>
    <div id="loginError" class="login-error">Nieprawid≈Çowe has≈Ço!</div>
  </div>
</div>

<div id="appContent" style="display:none;">
  <div class="main-wrapper">

    <div class="card container">
      <img src="https://i.ibb.co/Csb6yXgJ/Logo-CAR-NET-1.png" alt="CarNet logo" />
      <h2>Kalkulator wyp≈Çaty</h2>

      <label class="field-label" for="hours">Ilo≈õƒá godzin:</label>
      <input id="hours" type="number" inputmode="numeric" min="0" placeholder="np. 218" />

      <label class="field-label" for="tasks">Ilo≈õƒá zada≈Ñ premiowanych:</label>
      <input id="tasks" type="number" inputmode="numeric" min="0" placeholder="np. 270" />

      <div class="checkbox-label">
        <label for="student">
          <input id="student" type="checkbox" />
          Status ucznia (stawka 31,40 z≈Ç/h)
        </label>
      </div>

      <div class="btn-row">
        <button id="calcBtn" type="button">Oblicz</button>
        <button id="resetBtn" type="button" class="secondary">Resetuj</button>
      </div>

      <div id="resultSummary" class="result" style="display:none;"></div>
      <div id="resultDetails" class="details" style="display:none;"></div>

      <div class="credits">supported by <span>dejw03</span></div>
      <span class="logout-link" onclick="logout()">Wyloguj i zablokuj dostƒôp</span>
    </div>

    <div class="card sidebar">
      <strong>Zadania premiowane:</strong>
      <ul>
        <li>Wydaj pojazd (do najmu)</li>
        <li>Odbierz pojazd (z najmu)</li>
        <li>Podstaw pojazd (do najmu)</li>
        <li>Wr√≥ƒá z odbioru (z najmu)</li>
        <li>Podstaw pojazd do serwisu</li>
        <li>Wr√≥ƒá z serwisu</li>
        <li>Przygotuj pojazd (kompletne przygotowanie)</li>
        <li>Transport pojazdu do dealera</li>
        <li>Odbi√≥r pojazdu od dealera</li>
        <li>Relokuj pojazd (pow. 2 km)</li>
        <li>Relokacja sprzeda≈ºowa (pow. 2 km)</li>
        <li>Inne ‚Äì Dojazd/powr√≥t z relokacji</li>
      </ul>

      <strong>Wska≈∫nik oraz kwoty premii</strong>
      <ul>
        <li>do 160 = 0 z≈Ç</li>
        <li>160 ‚Äì 169 = 200 z≈Ç</li>
        <li>170 ‚Äì 179 = 400 z≈Ç</li>
        <li>180 ‚Äì 189 = 600 z≈Ç</li>
        <li>190 ‚Äì 199 = 800 z≈Ç</li>
        <li>powy≈ºej 200 = 1000 z≈Ç</li>
      </ul>
    </div>

  </div>
</div>

<script>
/* --- LOGOWANIE Z PAMIƒòCIƒÑ --- */
const correctPassword = "maslak";
const loginOverlay = document.getElementById("loginOverlay");
const appContent = document.getElementById("appContent");
const loginBtn = document.getElementById("loginBtn");
const passwordInput = document.getElementById("passwordInput");
const loginError = document.getElementById("loginError");

// Sprawdzenie sesji przy ≈Çadowaniu
if (localStorage.getItem("carnet_auth") === "true") {
  showApp();
}

function showApp() {
  loginOverlay.style.display = "none";
  appContent.style.display = "block";
}

function handleLogin() {
  if (passwordInput.value === correctPassword) {
    localStorage.setItem("carnet_auth", "true");
    showApp();
  } else {
    loginError.style.display = "block";
    passwordInput.value = "";
  }
}

function logout() {
  localStorage.removeItem("carnet_auth");
  location.reload();
}

loginBtn.addEventListener("click", handleLogin);
passwordInput.addEventListener("keypress", (e) => {
  if (e.key === "Enter") handleLogin();
});

/* --- KALKULATOR --- */
const STAWKA_CARNET_BRUTTO = 28.00;
const STAWKA_UCZEN_BRUTTO = 31.40; // Nowa stawka
const STAWKA_MIN_NETTO = 24.66;    // Nowa stawka
const NET_FACTOR = 0.82;

const hoursInput = document.getElementById('hours');
const tasksInput = document.getElementById('tasks');
const studentCheckbox = document.getElementById('student');
const calcBtn = document.getElementById('calcBtn');
const resetBtn = document.getElementById('resetBtn');
const resultSummary = document.getElementById('resultSummary');
const resultDetails = document.getElementById('resultDetails');

function grossToNet(value){ return +(value * NET_FACTOR).toFixed(2); }

function calculate(){
  const hours = parseFloat(hoursInput.value);
  const tasks = parseFloat(tasksInput.value);
  
  if (isNaN(hours) || isNaN(tasks) || hours < 0 || tasks < 0){
    alert("Podaj poprawne warto≈õci!");
    return;
  }
  
  const isStudent = studentCheckbox.checked;
  const wsk = hours > 0 ? (tasks / hours) * 168 : 0;
  
  // Logika prog√≥w premiowych
  let premia = 0;
  if (wsk >= 160 && wsk < 170) premia = 200;
  else if (wsk >= 170 && wsk < 180) premia = 400;
  else if (wsk >= 180 && wsk < 190) premia = 600;
  else if (wsk >= 190 && wsk < 200) premia = 800;
  else if (wsk >= 200) premia = 1000;

  let total = 0;
  let szczegoly = "";

  if (hours >= 100 && wsk >= 160){
    const carnetBrutto = hours * STAWKA_CARNET_BRUTTO;
    if (isStudent){
      total = carnetBrutto + premia;
      szczegoly = `Wyp≈Çata carnetowa: ${carnetBrutto.toFixed(2)} z≈Ç<br>Premia: ${premia} z≈Ç`;
    } else {
      total = grossToNet(carnetBrutto) + grossToNet(premia);
      szczegoly = `Wyp≈Çata carnetowa netto (~82%): ${grossToNet(carnetBrutto).toFixed(2)} z≈Ç<br>Premia netto (~82%): ${grossToNet(premia).toFixed(2)} z≈Ç`;
    }
  } else {
    if (isStudent){
      total = STAWKA_UCZEN_BRUTTO * hours;
      szczegoly = `Rozliczenie stawkƒÖ minimalnƒÖ ucznia: ${STAWKA_UCZEN_BRUTTO.toFixed(2)} z≈Ç/h`;
    } else {
      total = STAWKA_MIN_NETTO * hours;
      szczegoly = `Rozliczenie stawkƒÖ minimalnƒÖ netto: ${STAWKA_MIN_NETTO.toFixed(2)} z≈Ç/h`;
    }
  }

  resultSummary.style.display = "block";
  resultDetails.style.display = "block";
  resultSummary.innerHTML = `Wyp≈Çata ko≈Ñcowa: <strong>${total.toFixed(2)} z≈Ç</strong>`;
  resultDetails.innerHTML = szczegoly + `<br><strong>Wska≈∫nik:</strong> ${wsk.toFixed(2)}<br><br><small>Wymagane do premii: min. 100h i wska≈∫nik >=160.</small>`;
}

function resetForm(){
  hoursInput.value = "";
  tasksInput.value = "";
  studentCheckbox.checked = false;
  resultSummary.style.display = "none";
  resultDetails.style.display = "none";
}

calcBtn.addEventListener("click", calculate);
resetBtn.addEventListener("click", resetForm);
</script>

</body>
</html>
